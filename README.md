# practice_12
任务二（总分：47分）
任务描述：请基于ZigBee模块（黑板）进行基础开发，采用中断方式检测按键，定时器1采用自由运行模式、32分频，请编程实现按键中断控制4个LED灯（D3、D4、D5、D6）工作于不同模式，并通过串口输出当前工作状态信息。
设备列表：
1、ZigBee模块（黑板）1块+电源适配器1个
2、USB转串口线1根
3、CC Debugger仿真器1个
任务要求：
在 “C:\JoyWork\01\work\Task\”文件夹下创建IAR工程，工程名字和工作空间的名字均为：“Task+准考证号后12位”，把“Task” 文件夹下的“test.c”添加到IAR工程中，配置好工程选项参数，确保工程编译成功。（4分）。在“test.c”中添加代码实现以下功能：（注意：题目中涉及的变量均已在test.c中定义）
1、	ZigBee模块一上电，所有LED灯不亮。（3分）
2、	SW1按键采用中断的方式进行检测，上拉输入模式，下降沿触发中断。（6分）
3、	将定时器1配置为32MHz下32分频，初始化时将其设置成暂停运行状态，并使能定时器1的溢出中断和定时器1中断。（6分）
4、	串口通信采用波特率14400，此部分代码无需考生处理。
5、	4个LED灯（D3、D4、D5、D6）有3种工作模式，在1秒内统计按下SW1的不同次数从而改变灯的工作模式（12分）：
1）在1秒内按1次SW1则LedState = 1，模式为“mode1”，D3、D4、D5、D6全部熄灭；
2）在1秒内按2次SW1则LedState = 2，模式为“mode2”，D3、D4、D5、D6全部闪烁显示； 
3）在1秒内按3次SW1则LedState = 3，模式为“mode3”，D3、D4熄灭，D5、D6交替闪烁。
以上显示效果的延时可以调用delay()函数实现。
6、	按键中断服务程序开发：（6分）
当检测到按键按下后，统计按键次数，清除按键中断标志位，同时开启定时器1工作于自由运行模式。
7、	定时中断服务程序开发：（10分）
在1秒的定时时间到了之后，暂停运行定时器1， 清零定时器1计数寄存器T1CNTL，设置LED灯工作模式等于按键次数，并把当前LED灯工作模式发送到串口，格式为：当前工作于modeX模式（其中X值为1、2、3）。把串口输出信息截图保存至“图集.docx”中的8.png处。
8、	考试时间截止后，确保“图集.docx”和源码工程文件已保存后， 对work文件夹进行压缩，点击“上传文件”将压缩后的“work.zip”上传至服务器指定目录。
![image](https://user-images.githubusercontent.com/104015167/200776420-9f8eec95-b995-4141-af6c-63e9d3626014.png)
